---
description: "MCPサーバーのセットアップに関するベストプラクティスとトラブルシューティングのガイドライン"
author: "Reco & Jun"
version: "1.0"
tags: ["mcp", "server", "setup", "troubleshooting", "best-practice"]
globs: ["*"]
---
# MCPサーバー セットアップガイドライン

## 概要
このドキュメントは、新しいMCPサーバーをセットアップする際の標準的な手順と、問題発生時のトラブルシューティング方法を定義します。

## セットアップのベストプラクティス

1.  **公式ドキュメントを最優先**:
    - 新しいMCPサーバーを扱うときは、まず `web_fetch` ツールを使用して、GitHubリポジトリのREADMEなどの公式ドキュメントを読み込み、仕様を正確に理解する。

2.  **依存関係の確認**:
    - サーバーが依存する外部ツールやプラグイン（例: `Obsidian Local REST API`）がないか、ドキュメントを注意深く確認する。

3.  **設定方法の多様性を考慮**:
    - 環境変数の設定方法が複数ある可能性（`.env` ファイル、Clineの設定画面の `env` ブロックなど）を常に考慮する。
    - WSL環境など、特殊な環境では環境変数が正しく渡らない可能性があることを念頭に置き、`.env` ファイルの使用やリポジトリのローカルクローンなど、より確実な方法を検討する。

4.  **ツール名の確認**:
    - `Unknown tool` エラーが発生した場合、思い込みでツール名を修正するのではなく、まずは `access_mcp_resource` ツールで `tools` URIにアクセスし、サーバーが提供するツールの一覧を正確に取得することを試みる。

## トラブルシューティング

- **`Not connected` エラー**:
    - サーバープロセスが起動していない、またはすぐに終了している可能性が高い。
    - 環境変数が正しく渡っていないことが主な原因と考えられるため、設定方法を見直す。

- **`Unknown tool` エラー**:
    - サーバーには接続できているが、指定したツール名が存在しない。
    - ツール名のタイポや、`obsidian_` のようなプレフィックスの有無を確認する。
    - 上記の「ツール名の確認」手順に従い、正しいツール名を取得する。

- **エラーが続く場合**:
    - 一つの方法に固執せず、早めに別の角度からのアプローチ（リポジトリのクローン、別のサーバーの試行など）をユーザーに提案する。
